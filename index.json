[{"content":"","date":"19 November 2024","externalUrl":null,"permalink":"/develop/","section":"Develops","summary":"","title":"Develops","type":"develop"},{"content":"","date":"19 November 2024","externalUrl":null,"permalink":"/","section":"é²¸äº‘ğŸ³","summary":"","title":"é²¸äº‘ğŸ³","type":"page"},{"content":"","date":"7 November 2024","externalUrl":null,"permalink":"/tags/docker/","section":"Tags","summary":"","title":"Docker","type":"tags"},{"content":"","date":"7 November 2024","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","date":"7 November 2024","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":" å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…ï¼š sudo yum install -y yum-utils device-mapper-persistent-data lvm2 è®¾ç½® Docker çš„é˜¿é‡Œäº‘ Yum ä»“åº“ï¼š sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo åˆ—å‡ºå¯ç”¨çš„ Docker ç‰ˆæœ¬ï¼š yum list docker-ce --showduplicates | sort -r å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š sudo yum install -y docker-ce-20.10.13 docker-ce-cli-20.10.13 containerd.io å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼š sudo systemctl start docker sudo systemctl enable docker éªŒè¯å®‰è£…ï¼š sudo docker --version sudo docker run hello-world ","date":"7 November 2024","externalUrl":null,"permalink":"/develop/container/%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84docker%E5%B9%B6%E8%AE%BE%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F/","section":"Develops","summary":"","title":"å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„dockerå¹¶è®¾ç½®é˜¿é‡Œäº‘é•œåƒ","type":"develop"},{"content":"","date":"7 November 2024","externalUrl":null,"permalink":"/series/%E5%BC%80%E5%8F%91/","section":"Series","summary":"","title":"å¼€å‘","type":"series"},{"content":"","date":"30 October 2024","externalUrl":null,"permalink":"/tags/ssh/","section":"Tags","summary":"","title":"Ssh","type":"tags"},{"content":" ç”Ÿæˆsshå¯†é’¥å¹¶é€šè¿‡sshå¯†é’¥è¿æ¥è¿œç¨‹æœåŠ¡å™¨ # ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼š åœ¨æœ¬åœ°ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼š\nssh-keygen -t rsa -b 4096 -C \u0026#34;your_email@example.com\u0026#34; æŒ‰ç…§æç¤ºè¾“å…¥ä¿å­˜å¯†é’¥çš„æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤æ˜¯ ~/.ssh/id_rsaï¼‰å’Œå¯†ç ï¼ˆå¯é€‰ï¼‰ã€‚\nå°†å…¬é’¥æ·»åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼š ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å…¬é’¥ï¼ˆé»˜è®¤ä¸º ~/.ssh/id_rsa.pubï¼‰æ·»åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨çš„ ~/.ssh/authorized_keys æ–‡ä»¶ä¸­ï¼š\nssh-copy-id -i ~/.ssh/id_rsa.pub remote_user@remote_host æŒ‰ç…§æç¤ºè¾“å…¥è¿œç¨‹æœåŠ¡å™¨çš„å¯†ç ã€‚å®Œæˆåï¼Œä½ çš„å…¬é’¥å°†è¢«æ·»åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨çš„ `~/.ssh/authorized\n","date":"30 October 2024","externalUrl":null,"permalink":"/develop/record/%E7%94%9F%E6%88%90ssh%E5%AF%86%E9%92%A5%E5%B9%B6%E9%80%9A%E8%BF%87ssh%E5%AF%86%E9%92%A5%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/","section":"Develops","summary":"","title":"ç”Ÿæˆsshå¯†é’¥å¹¶é€šè¿‡sshå¯†é’¥è¿æ¥è¿œç¨‹æœåŠ¡å™¨","type":"develop"},{"content":"","date":"30 October 2024","externalUrl":null,"permalink":"/tags/%E8%BF%90%E7%BB%B4/","section":"Tags","summary":"","title":"è¿ç»´","type":"tags"},{"content":"","date":"24 October 2024","externalUrl":null,"permalink":"/tags/nginx/","section":"Tags","summary":"","title":"Nginx","type":"tags"},{"content":" é—®é¢˜èƒŒæ™¯ # æ–°é¡¹ç›®éœ€è¦ç”¨åˆ°websocketè¿›è¡Œé€šè®¯,æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯è„šæ‰‹æ¶æä¾›çš„websocketé€šè®¯æ˜¯èµ°wsåè®®çš„ä¹Ÿå°±æ˜¯http,å› æ­¤éœ€è¦ç”¨nginxæ¥è½¬å‘httpsè¯·æ±‚ã€‚ ps: æˆ‘ä»¬ç”¨çš„spring-websocketå¥½åƒwebsocketå¯ä»¥æ”¯æŒé…ç½®ä¸€äº›è¯ä¹¦çš„ä¿¡æ¯,æ²¡åŠæ³•ç€æ€¥ææµ‹å¤ªæ‡’äº†ï¼Œå›å¤´å†ç ”ç©¶ä¸‹è¡¥ä¸Šã€‚\nnginxé…ç½® # æ²¡å•¥å¥½è¯´çš„,å›ºå®šè·¯å¾„è½¬å‘åˆ°httpè¯·æ±‚,ç›´æ¥ä¸Šé…ç½®\nlocation /wss-xg { proxy_pass http://ip:port/xg-security/resource/websocket?$args; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade;##æ­¤å¤„Upgradeæ³¨æ„å¤§å°å†™ proxy_set_header Connection \u0026#34;Upgrade\u0026#34;; proxy_set_header Remote_addr $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_read_timeout 600s; } é¢å¤–è¡¥å…… # jså¥½åƒåœ¨websocketè¯·æ±‚ä¸­ï¼Œtokenæ˜¯æ²¡æ³•é€šè¿‡headerå»ä¼ é€’çš„(æ²¡éªŒè¯,å…¶ä»–åšå®¢é‡Œçœ‹åˆ°çš„)ï¼Œæ‰€æœ‰å¦‚æœéœ€è¦æƒé™éªŒè¯ï¼Œå¯ä»¥åœ¨requestParamé‡Œä¼  å¦‚æœå‰ç«¯ä½¿ç”¨äº†socket.ioè¿™ç±»æ¡†æ¶æ¥åšsocketè¯·æ±‚å¤„ç†ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¼šå¯¹åç«¯çš„socketè·¯å¾„æœ‰è¦æ±‚ã€‚ ä¾‹å¦‚å¯¹äºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®ï¼Œå‰ç«¯åœ¨è°ƒè¯•æ—¶ä½¿ç”¨çš„æ˜¯https://address/wss-xg,ä½†æ˜¯å®é™…è¯·æ±‚å°±æ˜¯wss://address/socket.io?xxx,æœ¬æ¥åº”è¯¥ç»Ÿä¸€å¯¹è¯¥è¯·æ±‚ åšä»£ç†ä½†æ˜¯ç”±äºå·²ç»æœ‰äº†å…¶ä»–é¡¹ç›®ç”¨è¿™ç§æ–¹å¼æ¥å…¥äº†websocketæ‰€ä»¥æˆ‘è¿™é‡Œä¹Ÿæ²¡æ³•ç”¨äº†,è¿™é‡Œé™„ä¸‹socket.ioæ–¹å¼çš„nginxé…ç½® location ^~/socket.io/ { proxy_pass http://test.jinyingweishi.cn:28889; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade;##æ­¤å¤„Upgradeæ³¨æ„å¤§å°å†™ proxy_set_header Connection \u0026#34;Upgrade\u0026#34;; proxy_set_header Remote_addr $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_connect_timeout 15s; proxy_send_timeout 3600s; proxy_read_timeout 3600s; } ","date":"24 October 2024","externalUrl":null,"permalink":"/develop/middleware/nginx/nginx%E8%B5%B0https%E8%BD%AC%E5%8F%91websocket%E8%AF%B7%E6%B1%82/","section":"Develops","summary":"","title":"Nginxèµ°httpsè½¬å‘websocketè¯·æ±‚","type":"develop"},{"content":"","date":"24 October 2024","externalUrl":null,"permalink":"/tags/websocket/","section":"Tags","summary":"","title":"Websocket","type":"tags"},{"content":" é—®é¢˜èƒŒæ™¯ # åœ¨é¡¹ç›®å¼€å‘ä¸­æœ‰æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°ä¸€æ¡è®°å½•ä¸­å¯èƒ½æŸæ¡è®°å½•çš„æŸä¸ªå±æ€§å¯¹åº”å¤šä¸ªå€¼çš„é—®é¢˜ï¼Œ\nä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯é‡‡ç”¨ â€œ,â€ æ‹¼æ¥ç„¶åä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨çš„æ–¹æ¡ˆã€‚è¿™ç§æ–¹æ¡ˆæœ‰ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹å°±æ˜¯éœ€è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ã€‚ å› æ­¤ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åŸºäºæ•°æ®åº“varcharç±»å‹ + mybatisPlusçš„filedHandler + TableFiledæ³¨è§£ åšäº†ä¸ªå°æ–¹æ¡ˆæ¥è§£å†³å®ƒ, ä½¿ç”¨çš„è¯åªéœ€è¦åœ¨Listå±æ€§ä¸Šä½¿ç”¨æ³¨è§£å³å¯ã€‚ æ•´ä½“è®¾è®¡ # é¦–å…ˆæˆ‘ä»¬è¦ä¿è¯åœ¨æ•´ä½“javaé¡¹ç›®ä¸­é™¤äº†å®ä½“ç±»è¦æ·»åŠ æ³¨è§£ä¹‹å¤–ï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­æ— æ„Ÿï¼Œæ‰€ä»¥è¦è€ƒè™‘åœ¨æ¥æ”¶è¯·æ±‚ï¼Œå’Œæ•°æ®å…¥åº“ä¸¤ä¸ªç‚¹æœ‰æ²¡æœ‰æœ‰é—®é¢˜ã€‚ æ¥æ”¶è¯·æ±‚å¯ä»¥ç”±webæ¡†æ¶è‡ªåŠ¨åºåˆ—åŒ–ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰Listç±»å‹çš„å±æ€§å³åˆ» public class SysDept { private List\u0026lt;Integer\u0026gt; deptType; } å…¶æ¬¡åœ¨å…¥åº“æ—¶æ•°æ®åº“è¦å®ç°Listå­˜å‚¨ï¼Œç°æœ‰çš„æ•°æ®ç»“æ„å·²ç»æ— æ³•æ»¡è¶³ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯varcharç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰Handlerå¹¶é…åˆæ³¨è§£æ¥å¤„ç†åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶çš„æ•°æ®è§£æå³å¯ã€‚ @TableName(value = \u0026#34;sys_dept\u0026#34;,autoResultMap = true) public class SysDept { @TableField(typeHandler = MpListHandler.class) private List\u0026lt;Integer\u0026gt; deptType; } æºç  # // æ•°æ®å¤„ç†å™¨ @MappedTypes({List.class}) @MappedJdbcTypes(JdbcType.VARCHAR) public class MpListHandler extends JacksonTypeHandler { public static final String QUERY_SPLIT = \u0026#34;,\u0026#34;; @Override protected Object parse(String json) { json = RegExUtils.replaceAll(json, Pattern.quote(\u0026#34;[,\u0026#34;), \u0026#34;[\u0026#34;); json = RegExUtils.replaceAll(json, Pattern.quote(\u0026#34;,]\u0026#34;), \u0026#34;]\u0026#34;); return super.parse(json); } @Override protected String toJson(Object obj) { String json = super.toJson(obj); json = RegExUtils.replaceAll(json, Pattern.quote(\u0026#34;[\u0026#34;), \u0026#34;[,\u0026#34;); json = RegExUtils.replaceAll(json, Pattern.quote(\u0026#34;]\u0026#34;), \u0026#34;,]\u0026#34;); return json; } public MpListHandler() { super(List.class); } public static String queryValue(Object param) { return QUERY_SPLIT + param + QUERY_SPLIT; } /** * list in æ¡ä»¶æŸ¥è¯¢ * * @param lqw * @param deptType */ public static void listInQuery(LambdaQueryWrapper\u0026lt;SysDept\u0026gt; lqw, List\u0026lt;?\u0026gt; deptType) { if (CollUtil.isNotEmpty(deptType)) { lqw.and(t-\u0026gt;{ for (Object value : deptType) { t.or().like(SysDept::getDeptType, MpListHandler.queryValue(value)); } }); } } } å‘ç‚¹ # å®ä½“ç±»ä¸Šæ³¨è§£ @TableName(value = \u0026ldquo;sys_dept\u0026rdquo;,autoResultMap = true) çš„autoResultMapä¸€å®šè¦å¼€å¯ é’ˆå¯¹äºè¯¥å±æ€§çš„inåŒ¹é…éœ€è¦è€ƒè™‘ä¸‹ï¼Œæºç ä¸­ç»™å‡ºäº†ä¸€ä¸ªæ–¹æ³•æ˜¯æ‹†é™¤æ¯ä¸ªitemï¼Œç”¨likeå’Œoræ¥åŒ¹é… ","date":"16 October 2024","externalUrl":null,"permalink":"/develop/design/java%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84list%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E8%AE%BE%E8%AE%A1/","section":"Develops","summary":"","title":"javaé¡¹ç›®ä¸­çš„Listç±»å‹æ•°æ®å­˜å‚¨è®¾è®¡","type":"develop"},{"content":"","date":"16 October 2024","externalUrl":null,"permalink":"/tags/mybatis/","section":"Tags","summary":"","title":"Mybatis","type":"tags"},{"content":"","date":"16 October 2024","externalUrl":null,"permalink":"/tags/%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88/","section":"Tags","summary":"","title":"è®¾è®¡æ–¹æ¡ˆ","type":"tags"},{"content":"","date":"15 October 2024","externalUrl":null,"permalink":"/tags/mysql/","section":"Tags","summary":"","title":"Mysql","type":"tags"},{"content":" é—®é¢˜æè¿° # ä»Šå¤©æ’æŸ¥ä¸€ä¸ªé—®é¢˜,sqlè¯­å¥æŸ¥è¯¢ä¸åˆ°æ•°æ®ï¼Œæ˜æ˜æœ‰æ•°æ®å´æŸ¥ä¸å‡ºä»»åŠ¡æ•°æ®sqlç±»ä¼¼äº\nselect * for XXX where XX != null; æ­£ç¡®çš„è¯­å¥æ˜¯\nselect * for XXX where XX is not null; åŸå›  # åœ¨ MySQL ä¸­ï¼ŒNULL ç”¨äºè¡¨ç¤ºç¼ºå¤±çš„æˆ–æœªçŸ¥çš„æ•°æ®ï¼Œå¤„ç† NULL å€¼éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸ºåœ¨æ•°æ®åº“ä¸­å®ƒå¯èƒ½ä¼šå¯¼è‡´ä¸åŒäºé¢„æœŸçš„ç»“æœã€‚\nä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼ŒMySQLæä¾›äº†ä¸‰å¤§è¿ç®—ç¬¦:\nIS NULL: å½“åˆ—çš„å€¼æ˜¯ NULL,æ­¤è¿ç®—ç¬¦è¿”å› trueã€‚ IS NOT NULL: å½“åˆ—çš„å€¼ä¸ä¸º NULL, è¿ç®—ç¬¦è¿”å› trueã€‚ \u0026lt;=\u0026gt;: æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆä¸åŒäº = è¿ç®—ç¬¦ï¼‰ï¼Œå½“æ¯”è¾ƒçš„çš„ä¸¤ä¸ªå€¼ç›¸ç­‰æˆ–è€…éƒ½ä¸º NULL æ—¶è¿”å› true å…³äº NULL çš„æ¡ä»¶æ¯”è¾ƒè¿ç®—æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ã€‚ä½ ä¸èƒ½ä½¿ç”¨ = NULL æˆ– != NULL åœ¨åˆ—ä¸­æŸ¥æ‰¾ NULL å€¼ ã€‚\nåœ¨ MySQL ä¸­ï¼ŒNULL å€¼ä¸ä»»ä½•å…¶å®ƒå€¼çš„æ¯”è¾ƒï¼ˆå³ä½¿æ˜¯ NULLï¼‰æ°¸è¿œè¿”å› NULLï¼Œå³ NULL = NULL è¿”å› NULL ã€‚\nå¯èƒ½æ¶‰åŠçš„nullå€¼å¤„ç† # æ£€æŸ¥æ˜¯å¦ä¸º NULL è¦æ£€æŸ¥æŸåˆ—æ˜¯å¦ä¸º NULLï¼Œå¯ä»¥ä½¿ç”¨ IS NULL æˆ– IS NOT NULL æ¡ä»¶ã€‚ SELECT * FROM employees WHERE department_id IS NULL; ä½¿ç”¨ COALESCE å‡½æ•°å¤„ç† NULL COALESCE å‡½æ•°å¯ä»¥ç”¨äºæ›¿æ¢ä¸º NULL çš„å€¼ï¼Œå®ƒæ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›å‚æ•°åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé NULL å€¼ï¼š SELECT product_name, COALESCE(stock_quantity, 0) AS actual_quantity FROM products; ä½¿ç”¨ IFNULL å‡½æ•°å¤„ç† NULL IFNULL å‡½æ•°æ˜¯ COALESCE çš„ MySQL ç‰¹å®šç‰ˆæœ¬ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸º NULLï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°ã€‚ SELECT product_name, IFNULL(stock_quantity, 0) AS actual_quantity FROM products; ä½¿ç”¨ \u0026lt;=\u0026gt; æ“ä½œç¬¦è¿›è¡Œ NULL æ¯”è¾ƒ \u0026lt;=\u0026gt; æ“ä½œç¬¦æ˜¯ MySQL ä¸­ç”¨äºæ¯”è¾ƒä¸¤ä¸ªè¡¨è¾¾å¼æ˜¯å¦ç›¸ç­‰çš„ç‰¹æ®Šæ“ä½œç¬¦ï¼Œå¯¹äº NULL å€¼çš„æ¯”è¾ƒä¹Ÿä¼šè¿”å› TRUEã€‚å®ƒå¯ä»¥ç”¨äºå¤„ç† NULL å€¼çš„ç­‰å€¼æ¯”è¾ƒã€‚ SELECT * FROM employees WHERE commission \u0026lt;=\u0026gt; NULL; æ³¨æ„èšåˆå‡½æ•°å¯¹ NULL çš„å¤„ç† åœ¨ä½¿ç”¨èšåˆå‡½æ•°ï¼ˆå¦‚ COUNT, SUM, AVGï¼‰æ—¶ï¼Œå®ƒä»¬ä¼šå¿½ç•¥ NULL å€¼ï¼Œå› æ­¤å¯èƒ½ä¼šå¾—åˆ°ä¸åŒäºé¢„æœŸçš„ç»“æœã€‚å¦‚æœå¸Œæœ›å°† NULL è§†ä¸º 0ï¼Œå¯ä»¥ä½¿ç”¨ COALESCE æˆ– IFNULLã€‚ SELECT AVG(COALESCE(salary, 0)) AS avg_salary FROM employees; ","date":"15 October 2024","externalUrl":null,"permalink":"/develop/record/mysql%E4%B8%ADnull%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%87%BA%E6%9D%A5%E6%95%B0%E6%8D%AE/","section":"Develops","summary":"","title":"Mysqlä¸­!=nullæŸ¥è¯¢ä¸å‡ºæ¥æ•°æ®","type":"develop"},{"content":" MQTTåè®®å…¥é—¨ # å‚è€ƒæ–‡æ¡£ç»´åŸºç™¾ç§‘ã€é˜¿é‡Œäº‘æ¶ˆæ¯é˜Ÿåˆ—MQTTç‰ˆæœ¬ã€MQTT3.1.1åè®®\nåè®®æ¥æº # mqttåè®®æœ€æ—©åœ¨1999å¹´è¢«æ’°å†™ã€‚æœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†ç›‘æ§çŸ³æ²¹ç®¡é“çŸ³æ²¹è¿è¾“,æ‰€ä»¥éœ€è¦ä¸€ä¸ªè½»é‡é«˜æ•ˆï¼Œå ç”¨å¸¦å®½å’Œç”µé‡å°‘çš„åè®®ã€‚ å› ä¸ºé‚£ä¸ªæ—¶å€™ç±»ä¼¼äºè¿™ç§è®¾å¤‡åªèƒ½é€šè¿‡å«æ˜Ÿå»è¿›è¡Œæ•°æ®é€šè®¯ï¼Œå¼€é”€å¾ˆå¤§ã€‚\nåè®®ç»„æˆ # mqttåè®®å®šä¹‰äº†ä¸¤ç§ç½‘ç»œå®ä½“,brokerå’Œclientsï¼ˆä¸€ä¸ªæ¶ˆæ¯brokerå’Œå¤šä¸ªclientsï¼‰ã€‚\nbrokerçš„ä¸»è¦ä½œç”¨æ˜¯æ¥æ”¶clientå‘é€æ¥çš„æ¶ˆæ¯ï¼Œå¹¶é€šè¿‡è·¯ç”±è½¬å‘ç»™ç›®æ ‡clientï¼Œæ¶ˆæ¯çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½å®Œå…¨ä¸éœ€è¦æ„ŸçŸ¥åˆ°ç›®æ ‡clientçš„åœ°å€ æˆ–è€…å­˜å‚¨ä»»ä½•è·¯ç”±è¡¨ã€‚\nclientæ˜¯ç”¨æ¥æ”¶å‘æ¶ˆæ¯çš„å®¢æˆ·ç«¯ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•è®¾å¤‡ï¼Œåªè¦è£…è½½äº†mqttåº“å¹¶ä¸”è¿æ¥åˆ°äº†brokeré‚£ä¹ˆä»–å°±å¯ä»¥ä½œä¸ºclientæ¥è¿›è¡Œæ”¶å‘æ¶ˆæ¯\næ¶ˆæ¯æµè½¬ # clientä¼šå‘é€ æ§åˆ¶æ¶ˆæ¯(control message) ç”±message + topicç»„æˆ åˆ° brokerï¼Œæ§åˆ¶æ¶ˆæ¯æœ€å°2å­—èŠ‚ï¼Œæœ€å¤§å¯ä»¥256mb brokerä¼šæ ¹æ®è®¢é˜…ä¿¡æ¯ï¼Œå‘æ‰€æœ‰è®¢é˜…äº†topicçš„clientè½¬å‘æ¶ˆæ¯ å¦‚æœæ²¡æœ‰clientè®¢é˜…è¯¥æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¯¥æ¶ˆæ¯ä¼šè¢«ä¸¢å¼ƒæ‰ï¼Œé™¤éè®¾ç½®äº†ä¿ç•™æ¶ˆæ¯ brokerä¼šä¿ç•™æœ€è¿‘çš„ä¸€æ¡ä¿ç•™æ•°æ®ï¼Œå½“ç”¨clientè®¢é˜…topicçš„æ—¶å€™ä¼šç«‹å³æ¨é€ broker # brokerå¯ä»¥éƒ¨ç½²åœ¨æœ¬åœ°æˆ–è€…äº‘ä¸Š,å®ƒä¼šç»´æŠ¤ä¸€ä¸ªç”±å±‚çº§ç»“æ„çš„topicï¼Œå½“clientå‘é€æ¶ˆæ¯åˆ°æŸä¸ªtopicåï¼Œ æ‰€æœ‰è®¢é˜…äº†è¯¥topicçš„clientéƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªè¯¥æ¶ˆæ¯å‰¯æœ¬ã€‚\nä¹‹æ‰€ä»¥è¯´æ˜¯å±‚çº§ç»“æ„çš„æ˜¯å› ä¸ºtopicå¯ä»¥ç”¨â€˜/â€™æ¥åŒºåˆ†å±‚çº§ï¼Œä½¿ç”¨â€˜+â€™å¯ä»¥åŒ¹é…å•ä¸ªå±‚çº§ï¼Œä½¿ç”¨â€˜#â€™å¯ä»¥åŒ¹é…å¤šä¸ªå±‚çº§\nhome/#å¯ä»¥åŒ¹é… home/living_room/temperatureã€home/bedroom/temperature\nhome/+/temperature å¯ä»¥åŒ¹é… home/living_room/temperature å’Œ home/bedroom/temperatureã€‚\næ¶ˆæ¯ç±»å‹ # connect # è¡¨ç¤ºç­‰å¾…ä¸æœåŠ¡å»ºç«‹ä¸€ä¸ªæ˜ç¡®çš„è¿æ¥,å¸Œæœ›å’ŒæœåŠ¡å»ºç«‹ä¸€ä¸ªè¿æ¥\ndisconnect # ç­‰å¾… MQTT å®¢æˆ·ç«¯å®Œæˆå…¶å¿…é¡»æ‰§è¡Œçš„æ‰€æœ‰å·¥ä½œï¼Œå¹¶ç­‰å¾… TCP/IP ä¼šè¯æ–­å¼€è¿æ¥\npublish # å°†è¯·æ±‚ä¼ é€’ç»™ MQTT å®¢æˆ·ç«¯åç«‹å³è¿”å›åˆ°åº”ç”¨ç¨‹åºçº¿ç¨‹ã€‚\nQuality of service(QOS) # QoS 0 æœ€å¤šä¸€æ¬¡ â€“ æ¶ˆæ¯ä»…å‘é€ä¸€æ¬¡ï¼Œå®¢æˆ·ç«¯å’Œä»£ç†æ— éœ€é‡‡å–ä»»ä½•é¢å¤–æ­¥éª¤æ¥ç¡®è®¤å‘é€ï¼ˆå³å‘å³å¿˜ï¼‰ã€‚ QoS 1 è‡³å°‘ä¸€æ¬¡ â€“ å‘é€è€…å¤šæ¬¡é‡è¯•æ¶ˆæ¯ï¼Œç›´åˆ°æ”¶åˆ°ç¡®è®¤ï¼ˆç¡®è®¤å‘é€ï¼‰ã€‚ Qos 2 æ°å¥½ä¸€æ¬¡â€”â€”å‘é€è€…å’Œæ¥æ”¶è€…è¿›è¡Œä¸¤çº§æ¡æ‰‹ï¼Œä»¥ç¡®ä¿åªæ¥æ”¶åˆ°æ¶ˆæ¯çš„ä¸€ä»½å‰¯æœ¬ï¼ˆä¿è¯ä¼ é€’ï¼‰ã€‚ é˜¿é‡Œäº‘äº‘æ¶ˆæ¯é˜Ÿåˆ—MQTT # ","date":"14 September 2024","externalUrl":null,"permalink":"/develop/network/mqtt%E5%8D%8F%E8%AE%AE/","section":"Develops","summary":"","title":"MQTTåè®®","type":"develop"},{"content":" TCP_IPåè®®æ— # æ–‡ç« æ€»ç»“è‡ª TCPã€UDPã€HTTPã€SOCKETã€WebSocketä¹‹é—´çš„åŒºåˆ« TCP/IP å››å±‚æ¨¡å‹æ¦‚è¿°\nåè®®æ¨¡å‹ # OSIä¸ƒå±‚æ¨¡å‹ # å„å±‚ä½œç”¨ # åº”ç”¨å±‚ï¼šè´Ÿè´£æä¾›å„ç§è½¯ä»¶çš„è¿è¡Œç¯å¢ƒï¼Œè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿç”¨æˆ·æ€\nè¡¨ç¤ºå±‚ï¼šè´Ÿè´£å°†ä¸åŒè®¾å¤‡é—´ä¼ è¾“çš„æ•°æ®è½¬æ¢ä¸ºå½¼æ­¤å¯ä»¥ç†è§£çš„æ ¼å¼\nä¼šè¯å±‚ï¼šè´Ÿè´£è¡¨ç¤ºå±‚å®ä½“ä¹‹é—´ä¼šè¯çš„å»ºç«‹ï¼Œç®¡ç†å’Œç»ˆæ­¢\nä¼ è¾“å±‚ï¼šè´Ÿè´£å»ºç«‹ä¸åŒè®¾å¤‡ä¹‹é—´ç«¯åˆ°ç«¯çš„è¿æ¥\nç½‘ç»œå±‚ï¼šè´Ÿè´£æ ¹æ®ç›®çš„ IP åœ°å€å®ç°å¯»å€åŠè·¯ç”±é€‰æ‹©\næ•°æ®é“¾è·¯å±‚ï¼šè´Ÿè´£æ•°æ®åŒ…å°å¸§åŠ MAC å¯»å€\nç‰©ç†å±‚ï¼šè´Ÿè´£æ•°æ®å¸§åœ¨ç‰©ç†ç½‘ç»œä¸­çš„å®é™…ä¼ è¾“\nTCP/IPå››å±‚æ¨¡å‹ # å››å±‚æ¨¡å‹ # å„å±‚åè®® # è¿™é‡Œæ‹¿å‘ä¸€æ¬¡å¿«é€’ä½œä¸ºä¸¾ä¾‹\nPDU åè®®æ•°æ®å•å…ƒ\nåº”ç”¨å±‚PDU æ•°æ® ä¼ è¾“å±‚PDU æ•°æ®æ®µ ç½‘ç»œå±‚PDU æ•°æ®åŒ… ç‰©ç†å±‚PDU æ¯”ç‰¹(ä½)\nåº”ç”¨å±‚ # åº”ç”¨å±‚å¯ä»¥ç±»æ¯”äºæˆ‘ä»¬å¯„å¿«é€’æ—¶å€™çš„è´§ç‰©,è´§ç‰©éœ€è¦è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶ä¸”è´´ä¸Šæ”¶ä»¶äººï¼Œæ”¶ä»¶åœ°å€ç­‰ï¼Œè¿™æ‰æˆä¸ºä¸€ä¸ªå¯ä»¥è¿è¾“çš„å¿«é€’\nåº”ç”¨å±‚åè®®ä¸»è¦ä½œç”¨æ—¶å°†æˆ‘ä»¬æ‰€éœ€è¦ä¼ è¾“çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ•°æ®å½¢å¼å’Œä¼ è¾“è§„åˆ™ï¼Œå°†æ•°æ®å°è£…ã€‚\nè¿ä½œåœ¨åº”ç”¨å±‚ä¸Šçš„åè®®æœ‰HTTPS/HTTPã€FTPã€DNSã€DHCPã€SMTPç­‰\nä¼ è¾“å±‚ # åº”ç”¨å±‚å¯ä»¥ç±»æ¯”äºæˆ‘ä»¬å¯„å¿«é€’æ—¶å€™çš„å¿«é€’ç«™,å¿«é€’ç«™ä¸è´Ÿè´£å®é™…çš„è¿è¾“,ä»–åªä¼šå°†å¿«é€’åˆ†ç€å¿«é€’å…¬å¸åˆ†å¼€ç„¶åå‘åˆ°ä¸åŒçš„å¿«é€’ä¸­è½¬ç«™ï¼Œ\nä¼ è¾“å±‚åŒæ ·ä¹Ÿå¹¶ä¸æ¶‰åŠå®é™…ä¼ è¾“ï¼Œä¸»è¦ä½œç”¨æ˜¯ç«¯å£å¯¹ç«¯å£çš„é€šä¿¡ï¼Œè¿ä½œåœ¨å…¶ä¸Šçš„åè®®ä¸»è¦æ˜¯TCP/UPDã€‚\ntcpåè®® TCPåè®®é€šè¿‡äº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ï¼Œæ…¢å¯åŠ¨ï¼Œæ‹¥å¡é¿å…ï¼Œè¶…æ—¶é‡è¯•ç­‰æœºåˆ¶ä¿éšœäº†æ•°æ®çš„å¯é ä¼ è¾“ï¼Œä½†æ˜¯æ•ˆç‡ä½ã€‚ TCPåè®®è§„å®šå½“æŠ¥æ–‡é•¿åº¦è¶…è¿‡MSSï¼ˆMax Segement Sizeï¼šæœ€å¤§æŠ¥æ–‡é•¿åº¦ï¼‰åï¼Œéœ€è¦å¯¹æ•°æ®æŠ¥æ–‡è¿›è¡Œåˆ†æ®µï¼Œ ç„¶åç»„æˆTCPæŠ¥æ–‡æ®µäº¤ç»™ç½‘ç»œå±‚è¿›è¡Œä¼ è¾“. ä¹‹æ‰€ä»¥åœ¨ä¼ è¾“å±‚å°†æ¶ˆæ¯åˆ‡ç‰‡æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„è§£å†³ç½‘ç»œå±‚ä¸¢åŒ…çš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬ä¸åˆ‡ï¼Œé‚£ä¹ˆä¼šåœ¨åº”ç”¨å±‚æŒ‰ç…§MTUï¼ˆMax Transport Unitï¼šæœ€å¤§ä¼ è¾“å•å…ƒ)æ¥è¿›è¡Œåˆ‡ç‰‡ï¼Œè¿™æ · çš„è¯ä¸€æ—¦ä¸¢åŒ…éœ€è¦å°†æ•´ä¸ªæ•°æ®æ¥è¿›è¡Œé‡å‘æ•ˆç‡ä½ä¸‹ï¼Œæ‰€ä»¥åœ¨ä¼ è¾“å±‚å°±å°†æ•°æ®åˆ‡ç‰‡ï¼Œå“ªä¸ªåŒ…ä¸¢äº†é‡å‘å°±å¥½ã€‚ tcpåè®®å­˜åœ¨ç²˜åŒ…é—®é¢˜ï¼Œç²˜åŒ…çš„é—®é¢˜å¯ä»¥ç»†åˆ†ä¸º å‘é€ç«¯ç²˜åŒ… å’Œ æ¥æ”¶ç«¯ç²˜åŒ… å‘é€ç«¯ç²˜åŒ…ï¼š 1.tcpå†…éƒ¨é»˜è®¤å¼€å¯nagleç®—æ³•ï¼Œè¯¥ç®—æ³•ä¼šå°†è¾ƒå°çš„æŠ¥æ–‡è¿›è¡Œåˆå¹¶å‘é€ï¼Œè¿™æ˜¯å¯¼è‡´ç²˜åŒ…çš„åŸå› ï¼Œå¯ä»¥é€šè¿‡å…³é—­nagleç®—æ³•è§£å†³ 2.TCPè¿æ¥çš„å‘é€æ–¹ä¼šå°†æŠ¥æ–‡æ®µæ”¾åœ¨ç¼“å†²åŒºï¼Œç­‰ç¼“å†²åŒºè£…æ»¡ä¹‹åå†å‘é€ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ç²˜åŒ… æ¥æ”¶æ–¹ç²˜åŒ… 1.TCPè¿æ¥çš„æ¥æ”¶æ–¹æœªå³ä½¿å–èµ°åˆ°è¾¾ç¼“å†²åŒºçš„æŠ¥æ–‡æ®µ é’ˆå¯¹äºå‘é€ç«¯å’Œæ¥æ”¶ç«¯ç¼“å†²åŒºæœªå³ä½¿å¤„ç†ç²˜åŒ…å¯ä»¥é‡‡ç”¨å¦‚ä¸‹ç­–ç•¥: 1.åº”ç”¨å±‚å®šä¹‰æ¶ˆæ¯å¤´éƒ¨,httpåè®®å°±æ˜¯å°†æ¶ˆæ¯åˆ’åˆ†ä¸ºå¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ† 2.å›ºå®šæ¶ˆæ¯é•¿åº¦ï¼Œæ‰€æœ‰æ¶ˆæ¯å›ºå®šé•¿åº¦ï¼Œæ¥æ”¶æ–¹ç›´æ¥æŒ‰ç…§æŒ‡å®šé•¿åº¦åˆ‡å‰²ï¼Œæ— éœ€è€ƒè™‘ç²˜åŒ… udpåè®® UDPåè®®é¢å‘æ— è¿æ¥ï¼Œåªç®¡å‘é€ï¼Œè‡³äºæ˜¯å¦äº¤ä»˜åˆ°æ¥æ”¶æ–¹ä¸ä½œä¿è¯ï¼Œæ‰€ä»¥æ•ˆç‡é«˜ï¼Œå¯é æ€§ä½ã€‚ ç½‘ç»œå±‚ # ç½‘ç»œå±‚ç±»æ¯”äºå¿«é€’ä¸­è½¬ç«™ï¼Œä»–ä»¬è´Ÿè´£å°†å…¨å¸‚çš„ç«™ç‚¹é€æ¥çš„åŒ…è£¹è¿›è¡Œæ”¶é›†ï¼ŒæŒ‰ç…§åœ°å€è¿›è¡Œåˆ†æ‹£ï¼Œå¹¶è£…è½¦ã€‚\nç½‘ç»œå±‚æ”¶åˆ°æ•°æ®ä¼ è¾“å±‚çš„æ•°æ®ä¹‹åï¼Œä¼šæŒ‰ç…§MTUæ¥è¿›è¡Œæ•°æ®åˆ‡ç‰‡ï¼Œç„¶åå†å¤´éƒ¨æ·»åŠ IPåŒ…å¤´ï¼Œç»„æˆæ•°æ®åŒ…ã€‚ç„¶åå†é€šè¿‡IPåè®®å¯»å€\nå¯»å€è¿‡ç¨‹ Ipç”±ç½‘ç»œå· + ä¸»æœºå·ç»„æˆ,å¯»å€æ—¶ä¼šå…ˆç”¨ ip å’Œå­ç½‘æ©ç è¿›è¡Œ ä¸è¿ç®— ç„¶åå†è‡ªèº«çš„è·¯ç”±è¡¨ä¸­å¯»æ‰¾ç»“æœä¸è¯¥ç»“æœç›¸åŒçš„è·¯ç”±å™¨è¡¨é¡¹ï¼ˆè¯´æ˜ç½‘ç»œå·ç›¸åŒ,åŒå±äºä¸€ä¸ªå­ç½‘ï¼‰ï¼Œå‘é€ç»™è·¯ç”±å™¨ã€‚ å¦‚æœæ²¡æ‰¾åˆ°å°±å›å§æŠ¥æ–‡å‘é€ç»™é»˜è®¤ç½‘å…³ï¼Œç½‘å…³ä¼šé‡å¤ä¹‹å‰çš„æ“ä½œï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡ä½è‡³æ‰€åœ¨å­ç½‘ï¼Œæœ€åå¹¿æ’­ç›®æ ‡IPåœ°å€ã€‚ å¦‚æœæŸä¸ªé˜¶æ®µæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„è·¯ç”±ï¼Œåˆ™ä¼šäº§ç”Ÿ ICMP æŠ¥é”™æ•°æ®åŒ… å¦‚æœæ˜¯ç›´è¿è·¯ç”±ï¼ˆå³åŒä¸€ä¸ªå­ç½‘å†…ï¼‰åˆ™æŒ‰ç…§ç¬¬äºŒå±‚ MAC åœ°å€ç›´æ¥å‘é€æ•°æ®\nç½‘ç»œæ¥å£å±‚ # ç½‘ç»œæ¥å£å±‚ç±»æ¯”äºå¿«é€’è½¦è¿è¾“ï¼Œè´Ÿè´£å®é™…çš„è¿è¾“ã€‚\né€šè¿‡ipå¯»å€å’Œè·¯ç”±å™¨é€‰æ‹©æˆ‘ä»¬çŸ¥é“äº†è¦å‘é€æ•°æ®å»å“ªï¼Œä½†æ˜¯ipä»…ä»…å¯ä»¥ç¡®å®šæˆ‘ä»¬è¦å‘åˆ°é‚£ä¸ªå­ç½‘ï¼Œå­ç½‘å†…éƒ¨çš„è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“å°±éœ€è¦ä¾é macåœ°å€æ¥è§£å†³äº†ã€‚\nmacå¯»å€è¿‡ç¨‹ æ¯ä¸ªå…¥ç½‘çš„ç½‘å¡æœ¬èº«ä¼šå†™åœ¨ä¸€ä¸ª48ä½çš„macåœ°å€ï¼Œæ˜¯ç”Ÿäº§æ—¶å€™å°±è¢«å†™å…¥åˆ°romä¸­çš„ï¼Œè‡ªèº«çš„macåœ°å€éƒ½å¯ä»¥é€šè¿‡romè·å– ä¸‹ä¸ªèŠ‚ç‚¹çš„macåœ°å€å¯ä»¥é€šè¿‡åœ°å€è½¬æ¢åè®®ARPè·å– æºä¸»æœºä¼šå¹¿æ’­ FF:FF:FF:FF:FF:FF + ç›®çš„ä¸»æœº IP åœ°å€ ç»™å­ç½‘å†…æ‰€æœ‰çš„ä¸»æœº ç›®æ ‡æœºå™¨æ”¶åˆ°æŒ‡ä»¤åå‘ç°ipä¸è‡ªèº«ipç›¸åŒï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›ç»™è¯·æ±‚æ–¹ï¼Œè¯·æ±‚æ–¹è·å–ä¸‹ä¸ªmacåœ°å€åï¼Œä¼šå°†è¿™å¯¹åœ°å€ç¼“å­˜åˆ°ARPç¼“å­˜ç©ºé—´ä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢å°±æœ‰å¯èƒ½å‘½ä¸­ï¼Œä¸€èˆ¬åªå­˜å‡ åˆ†é’Ÿ ","date":"14 September 2024","externalUrl":null,"permalink":"/develop/network/tcp_ip%E6%A8%A1%E5%9E%8B/","section":"Develops","summary":"","title":"TCP_IPæ¨¡å‹","type":"develop"},{"content":"","date":"14 September 2024","externalUrl":null,"permalink":"/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/","section":"Tags","summary":"","title":"ç½‘ç»œç¼–ç¨‹","type":"tags"},{"content":"","date":"14 September 2024","externalUrl":null,"permalink":"/tags/java/","section":"Tags","summary":"","title":"Java","type":"tags"},{"content":" å®šä¹‰ # lambdaè¡¨è¾¾å¼å…è®¸æˆ‘ä»¬æŠŠå‡½æ•°å½“ä½œä¸€ä¸ªæ–¹æ³•çš„å…¥å‚ä¼ å…¥\næ˜¯javaä¸­çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚\nç»“æ„ # ï¼ˆparametersï¼‰-\u0026gt; expression;\nï¼ˆparametersï¼‰-\u0026gt; {statements};\nå‡½æ•°å¼æ¥å£ # åªå£°æ˜äº†ä¸€ä¸ªæŠ½è±¡å‡½æ•°çš„æ¥å£å°±æ˜¯å‡½æ•°å¼æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@FunctionInterfaceæ¥ä¿è¯è¯¥æ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚\næˆ‘ä»¬ä½¿ç”¨lambdaè¡¨è¾¾å¼å®é™…ä¸Šå°±æ˜¯ç”Ÿæˆä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å¯¹è±¡ã€‚\njavaå†…ç½®çš„å‡½æ•°å¼æ¥å£ # æ–¹æ³•å¼•ç”¨ # æ–¹æ³•å¼•ç”¨å¯ä»¥ç†è§£ä¸ºlambdaè¡¨è¾¾å¼çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ã€‚å½“å‡½æ•°å¼æ¥å£æ‰€éœ€è¦ç”¨çš„å¯¹åº”çš„æ–¹æ³•å·²ç»æœ‰äº†å®ç°æ—¶å¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ã€‚\nFunction\u0026lt;Integer, Integer\u0026gt; square = Math::square; int result = square.apply(4); // ç»“æœä¸º 16 Function\u0026lt;String, Integer\u0026gt; strLength = String::length; int result = strLength.apply(\u0026#34;Hello\u0026#34;); // ç»“æœä¸º 5 Function\u0026lt;String, Person\u0026gt; createPerson = Person::new; Person person = createPerson.apply(\u0026#34;Alice\u0026#34;); ","date":"14 September 2024","externalUrl":null,"permalink":"/develop/language/java/java%E4%B8%AD%E7%9A%84lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/","section":"Develops","summary":"","title":"javaä¸­çš„lambdaè¡¨è¾¾å¼ä¸å‡½æ•°å¼ç¼–ç¨‹","type":"develop"},{"content":"","date":"14 September 2024","externalUrl":null,"permalink":"/tags/canal/","section":"Tags","summary":"","title":"Canal","type":"tags"},{"content":" æµ‹è¯•èƒŒæ™¯ # æœ¬æ¬¡æµ‹è¯•åœ¨æœ¬åœ°,ç”¨3ä¸ªåº“åšåŒæ­¥æµ‹è¯•,ç”±canal_master_1å’Œcanal_master_2å¾€canal_syncåŒæ­¥æ•°æ® æ–‡ä»¶é…ç½® # canalçš„é…ç½®ä¼šæ¶‰åŠåˆ°æ–‡ä»¶å¤¹ã€é…ç½®æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ä¹‹é—´çš„å…³è”,æ€»çš„é€»è¾‘å…³ç³»å¦‚ä¸‹ deployeré…ç½® # deployerçš„ä¸»è¦ä½œç”¨æ˜¯å¯¹æ•°æ®åº“è¿›è¡Œç›‘å¬,ä¼ªè£…destinationçš„ä»åº“ï¼Œè§£æå…¶binlog\ncanal/conf/canal.properties æ˜¯deployerä¸»é…ç½®æˆ‘ä»¬ä¸»è¦å…³æ³¨destinationsä¸‹çš„é…ç½®\n################################################# ######### destinations\t############# ################################################# # master1å’Œmaster2å¯¹åº”ç€confä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­å­˜æ”¾ç€å…·ä½“çš„ç›‘å¬åº“ä¿¡æ¯ã€åº“è¡¨è¿‡æ»¤è§„åˆ™ç­‰ canal.destinations = master1,master2 ps:å¤šä½™é…ç½®å·²ç»è£å‰ª,åªå…³æ³¨ä¸»è¦ä¿®æ”¹é…ç½®\nmaster1(2)æ–‡ä»¶å¤¹é…ç½® # master1(2)æ–‡ä»¶å¤¹å°±å¯¹åº”ç€destinationsä¸­çš„é…ç½®é¡¹ï¼Œå…¶å«ä¹‰æ˜¯è¢«ç›‘å¬çš„æ•°æ®æºï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹å­˜æ”¾å…¶ç›¸å…³é…ç½®åœ¨instance.properties\n# username/password canal.instance.master.address=127.0.0.1:3306 canal.instance.dbUsername=root canal.instance.dbPassword=12345678 canal.instance.connectionCharset = UTF-8 # é»˜è®¤ç›‘å¬æºæ•°æ®åº“ canal.instance.defaultDatabaseName=canal_master_1 canal.instance.enableDruid=false # table regex canal.instance.filter.regex=canal_master_1.order,canal_master_1.order_item adapteré…ç½® # adapterç«¯çš„ä½œç”¨æ˜¯è§£ææ¥è‡ªdeployerç«¯çš„binlogæ•°æ®å¹¶é€‚é…è½¬å‚¨åˆ°å„ç§æ•°æ®åº“æœ¬æ¬¡æ¡ˆä¾‹ä¸­æ˜¯ä»mysqlé€‚é…åˆ°mysql.\nadapterçš„ä¸»é…ç½®åœ¨conf/application.yml\nouterAdaptersä»£è¡¨ç€å¤–éƒ¨é€‚é…å™¨é…ç½®ï¼Œä¹Ÿå°±æ˜¯confé…ç½®ä¸‹å•ç‹¬æ‹å‡ºæ¥æ–‡ä»¶å¤¹å­˜æ”¾é…ç½®çš„æ„æ€\nname ä»£è¡¨æ–‡ä»¶å¤¹åç§°ï¼Œè¿™é‡Œmysqlä½¿ç”¨çš„æ˜¯rdb key æ˜¯ä»£è¡¨å…·ä½“é…ç½®åç§°ï¼Œè¯¥é…ç½®ä¸»è¦æ˜¯é…ç½®æ˜ å°„è§„åˆ™ properties å…¶ä¸‹é…ç½®çš„æ˜¯éœ€è¦åŒæ­¥åˆ°çš„æ•°æ®åº“ï¼ŒåŠç›®æ ‡åº“è¿™é‡Œç›®æ ‡åº“åªæœ‰ä¸€ä¸ªcanal_syncæ‰€ä»¥ä¿æŒä¸€è‡´å³å¯ server: port: 8081 spring: jackson: date-format: yyyy-MM-dd HH:mm:ss time-zone: GMT+8 default-property-inclusion: non_null canal.conf: mode: tcp #tcp kafka rocketMQ rabbitMQ flatMessage: true zookeeperHosts: syncBatchSize: 1000 retries: -1 timeout: accessKey: secretKey: consumerProperties: # canal tcp consumer canal.tcp.server.host: 127.0.0.1:11111 canal.tcp.batch.size: 500 srcDataSources: defaultDS: url: jdbc:mysql://127.0.0.1:3306/canal_master_1 username: root password: 12345678 canalAdapters: - instance: master1 # canal instance Name or mq topic name groups: - groupId: g1 outerAdapters: - name: rdb key: master1Mapping properties: jdbc.driverClassName: com.mysql.jdbc.Driver jdbc.url: jdbc:mysql://127.0.0.1:3306/canal_sync jdbc.username: root jdbc.password: 12345678 druid.stat.enable: false druid.stat.slowSqlMillis: 1000 - instance: master2 # canal instance Name or mq topic name groups: - groupId: g1 outerAdapters: - name: rdb key: master2Mapping properties: jdbc.driverClassName: com.mysql.jdbc.Driver jdbc.url: jdbc:mysql://127.0.0.1:3306/canal_sync jdbc.username: root jdbc.password: 12345678 druid.stat.enable: false druid.stat.slowSqlMillis: 1000 outerAdapters # é…ç½®master1Mapping.ymlæ—¶å¯ä»¥ç”¨dataSourceKey å…³è”æ•°æ®æºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨destinationæ¥å…³è”æ•°æ®æº\n#dataSourceKey: defaultDS destination: master1 groupId: g1 outerAdapterKey: master1Mapping concurrent: true dbMapping: database: canal_master_1 table: order targetTable: order targetPk: id: id tenant_id: tenant_id mapAll: true commitBatch: 3000 # æ‰¹é‡æäº¤çš„å¤§å° è‡³æ­¤é…ç½®å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘å°†é’ˆå¯¹ç»™å‡ºçš„é…ç½®ç»™åˆ°å…·ä½“çš„æµ‹è¯•æ•°æ®\næµ‹è¯•æŠ¥å‘Š # åŒåº“æ’å…¥,åŒæ­¥åº“åŒæ­¥æƒ…å†µ # æµ‹è¯•æ¡ˆä¾‹: master1 å’Œ master2 å„è‡ªå†™å…¥ä¸€æ¡æ•°æ®è§‚å¯Ÿ canal_syncåº“æ•°æ®æƒ…å†µ æµ‹è¯•ç»“æœ: æˆ‘ä»¬å¯ä»¥é€šè¿‡æ—¥å¿—è§‚æµ‹åˆ°æ•°æ®å·²ç»è¢«adapterè§£æå¹¶æ‰§è¡ŒåŒæ­¥ æ’å…¥ç»“æœ éªŒè¯destination å’Œ dataSourceKey # æµ‹è¯•æ¡ˆä¾‹: æ³¨é‡Šæ‰master1Mapping å’Œ master2Mapping ä¸­çš„destinationï¼Œå¯åŠ¨ååšæ•°æ®åŒæ­¥\næµ‹è¯•ç»“æœ: æ•°æ®åŒæ­¥å‡å¤±è´¥\nåŸå› åˆ†æ: é»˜è®¤æƒ…å†µä¸‹adapterä¼šä»deployerä¸­æ‹‰å–binlogï¼Œå¹¶è½¬æ¢æˆç›®æ ‡æ ¼å¼ã€‚ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½éœ€è¦è¿›è¡Œå›æŸ¥ç­‰æ“ä½œï¼Œå°±éœ€è¦ç”¨åˆ° dataSourceKeyä¸­çš„é…ç½®ä¿¡æ¯\nè‡³æ­¤æ­¤æ¬¡æµ‹è¯•æ¡ˆä¾‹ç»“æŸ\nå‚è€ƒé“¾æ¥: srcDataSourcesçš„ä½œç”¨æ˜¯ä»€ä¹ˆ\n","date":"14 September 2024","externalUrl":null,"permalink":"/develop/middleware/canal/canal%E5%A4%9A%E5%AF%B9%E4%B8%80%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B/","section":"Develops","summary":"","title":"Canalå¤šå¯¹ä¸€æ•°æ®åŒæ­¥æµ‹è¯•æ¡ˆä¾‹","type":"develop"},{"content":" ä¸šåŠ¡èƒŒæ™¯ # æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªä¸»ç³»ç»Ÿå’ŒNä¸ªå­ç³»ç»Ÿï¼Œå­ç³»ç»Ÿä¹‹é—´æ•°æ®éš”ç¦»,ä¸»ç³»ç»Ÿæœ‰å…¨éƒ¨æ•°æ®ã€‚\näºæ˜¯é’ˆå¯¹æ•°æ®åŒæ­¥å°±æœ‰äº†ä¸¤ä¸ªéœ€æ±‚ç‚¹\néœ€è¦å¯ä»¥åœ¨å°†Nä¸ªå­ç³»ç»Ÿçš„æ•°æ®å®æ—¶åŒæ­¥åˆ°ä¸»ç³»ç»Ÿ éœ€è¦è€ƒè™‘ä¸»å­ç³»ç»Ÿä¹‹é—´å‡ºç°ç½‘è·¯éš”ç¦»å­ç³»ç»Ÿä»ç„¶æ­£å¸¸å·¥ä½œå¯æ“ä½œ,å†ç½‘ç»œæ¢å¤åä¸»å­ç³»ç»Ÿä¹‹é—´è¿›è¡Œæ•°æ®çš„å¢é‡åŒæ­¥ã€‚ åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹æˆ‘ä»¬å‡†å¤‡å¯¹é˜¿é‡Œçš„cannelå’ŒdataXä¸¤ä¸ªå·¥å…·è¿›è¡Œè°ƒç ”\nå‰ç½®æ¡ä»¶ # ç›®å‰canal æ”¯æŒæºç«¯ MySQL ç‰ˆæœ¬åŒ…æ‹¬ 5.1.x , 5.5.x , 5.6.x , 5.7.x , 8.0.x mysqléœ€è¦å¼€å¯binglog # binlogæŸ¥è¯¢å‘½ä»¤ show variables like \u0026#39;log_bin\u0026#39;; # mysqlå¼€å¯binlog [mysqld] # æ‰“å¼€binlog log-bin=mysql-bin # é€‰æ‹©ROW(è¡Œ)æ¨¡å¼ binlog-format=ROW # é…ç½®MySQL replactionéœ€è¦å®šä¹‰ï¼Œä¸è¦å’Œcanalçš„slaveIdé‡å¤ server_id=1 # è¦ç›‘æ§çš„æ•°æ®åº“åç§° binlog-do-db=my-test canalåŸç† # canalçš„å·¥ä½œåŸç†å¯ä»¥æ˜¯åŸºäºä¸»ä»åŒæ­¥,ä½†æ˜¯ä¸ä¸»ä»åŒæ­¥ä¸å®Œå…¨ç›¸åŒã€‚\ncanalæ˜¯é€šè¿‡ä¼ªè£…æˆä»åº“é€šè¿‡dumpåè®®ä»mysqlæ‹‰å–binlogæ—¥å¿—ï¼Œè§£æbinlogæ—¥å¿—å¹¶å°†è§£æåçš„æ•°æ®åº”ç”¨åˆ°ç›®æ ‡æ•°æ®åº“\nä¸»ä»åŒæ­¥é€šè¿‡dumpåè®®æ‹‰å–binlogæ—¥å¿—åï¼Œé€šè¿‡binlogå›æ”¾æ¥è¾¾åˆ°æ•°æ®åŒæ­¥çš„ç›®çš„\nps:\nä¸»ä»åŒæ­¥åœ¨æ–­ç½‘é‡è¿çš„åœºæ™¯ä¸‹,å¦‚æœæ–­ç½‘æ—¶é—´è¿‡é•¿ï¼Œåœ¨æ•°æ®ä¸€è‡´æ€§è¿™å—å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼ˆbinlogä½ç½®ä¸ä¸€è‡´,relay log æŸåï¼Œæ•°æ®å†²çªç­‰åŸå› ï¼‰ï¼Œ éœ€è¦ä¾èµ–ä¸‰æ–¹çš„å·¥å…·æ£€æŸ¥å’Œæ‰‹åŠ¨è§£å†³ã€‚\ncanalé’ˆå¯¹äºæ–­ç½‘æ¢å¤åçš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œç»™å‡ºäº†æŒä¹…åŒ–binlogåŒæ­¥ä½ç½®ä¿¡æ¯çš„æ–¹æ¡ˆï¼ˆæ–‡ä»¶æˆ–è€…æ•°æ®åº“éƒ½å¯ï¼‰ï¼Œä»¥ä¿è¯æ–­ç½‘åä¸å­˜åœ¨æ•°æ®ä¸€è‡´æ€§é—®é¢˜ ä¸šåŠ¡åœºæ™¯åŒ¹é…åº¦ # canalæ”¯æŒå¤šå­åº“å¾€ä¸€ä¸ªä¸»åº“åŒæ­¥çš„æƒ…å†µ ç›¸å¯¹äºä¸»ä»åŒæ­¥ä¸‹çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œcanalæœ¬èº«å°±ç»™äº†è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€å†å€Ÿç”¨ç¬¬ä¸‰æ–¹å·¥å…·æ¥å¤„ç† ","date":"13 September 2024","externalUrl":null,"permalink":"/develop/middleware/canal/canal%E7%9A%84%E8%B0%83%E7%A0%94/","section":"Develops","summary":"","title":"canalè°ƒç ”","type":"develop"},{"content":" é˜Ÿåˆ— # å®šä¹‰ # é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨,ä»–çš„ç‰¹æ®Šæ€§åœ¨äºå°†çº¿æ€§è¡¨çš„æ“ä½œé™å®šä¸ºè¡¨å°¾æ’å…¥ï¼Œè¡¨å¤´åˆ é™¤\né€šè¿‡è¿™ä¸ªç‰¹æ®Šçš„é™å®šæˆ‘ä»¬å¯ä»¥è¾¾åˆ°FIFO(first in first out)çš„ç›®çš„\næŠ½è±¡æ•°æ®ç±»å‹ # Queue.java\né˜Ÿåˆ—çš„æ•°ç»„å®ç°ï¼ˆå¾ªç¯é˜Ÿåˆ—ï¼‰ # CircleQueue.java\né˜Ÿåˆ—æ•°æ®å­˜å‚¨çš„é—®é¢˜ # è™½ç„¶æˆ‘ä»¬é‡‡ç”¨æ•°ç»„æ¥ä½œä¸ºæ•°æ®å­˜å‚¨çš„åŸºæœ¬ç»“æ„ï¼Œä½†æ˜¯ç”±äºé˜Ÿåˆ—çš„ä½¿ç”¨è¿‡ç¨‹ä¸­å¤´å°¾æŒ‡é’ˆæ˜¯åŠ¨æ€çš„ã€‚\næ‰€ä»¥æˆ‘ä»¬å¾ˆå®¹ä¸€é€ æˆå¤´æŒ‡é’ˆåˆ°index = 0 ä¹‹é—´çš„ç©ºé—´æµªè´¹ å› æ­¤æˆ‘ä»¬é‡‡ç”¨ å°¾æŒ‡é’ˆ = (å°¾æŒ‡é’ˆ + 1) % data.lengthçš„æ–¹å¼æ¥ç§»åŠ¨å°¾æŒ‡é’ˆï¼Œè®©å°¾æŒ‡é’ˆå¯ä»¥å¾ªç¯èµ·æ¥\nè¿™æ ·å°±è§£å†³äº†å­˜å‚¨ç©ºé—´æµªè´¹çš„é—®é¢˜\nå°¾æŒ‡é’ˆç§»åŠ¨çš„å‡ ä¸ªé—®é¢˜ï¼Œ # CircleQueue.java#rearMove\næŒ‰ç…§æ­£å¸¸æƒ…å†µä¸‹ï¼Œé˜Ÿåˆ—ä¸´ç•Œçš„é—®é¢˜åˆ¤æ–­åº”è¯¥å¦‚ä¸‹\n# é˜Ÿåˆ—æ»¡ this.font == this.rear # é˜Ÿåˆ—ç©º this.font == this.rear æˆ‘ä»¬æ— æ³•åŒºåˆ†é˜Ÿåˆ—æ»¡ å’Œ é˜Ÿåˆ—ç©ºï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„å˜é‡flagæ¥åˆ¤æ–­ã€‚\næˆ‘ä»¬è¿™é‡Œå¯ä»¥ä½¿ç”¨ç©ºå‡ºæœ€åä¸€ä¸ªå­˜å‚¨ç©ºé—´çš„æ–¹å¼æ¥è¾¾åˆ°è¯¥ç›®çš„ï¼Œè€Œä¸ç”¨å¼•å…¥æ–°çš„çŠ¶æ€\nthis.rear = ++this.rear % data.length; if (this.rear == this.front){ throw new RuntimeException(\u0026#34;rear is out of size\u0026#34;); } é˜Ÿåˆ—çš„é“¾è¡¨å®ç°å®ç° # LinkedQueue.java\n","date":"11 September 2024","externalUrl":null,"permalink":"/develop/structure/queue/","section":"Develops","summary":"","title":"é˜Ÿåˆ—","type":"develop"},{"content":"","date":"11 September 2024","externalUrl":null,"permalink":"/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","section":"Tags","summary":"","title":"æ•°æ®ç»“æ„","type":"tags"},{"content":" æ ˆ # å®šä¹‰ # æ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨,åªå¯ä»¥åœ¨çº¿æ€§è¡¨çš„åº•éƒ¨è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œ.\nçº¿æ€§è¡¨çš„å¤´éƒ¨è¢«ç§°ä¸ºæ ˆåº•,åº•éƒ¨è¢«æˆä¸ºæ ˆé¡¶,ä¹Ÿå°±æ˜¯è¯´æ ˆåªå¯ä»¥åœ¨æ ˆé¡¶è¿›è¡Œæ’å…¥æˆ–è€…åˆ é™¤æ“ä½œ\næ’å…¥æ“ä½œè¢«ç§°ä¸ºå‹æ ˆ(push) åˆ é™¤æ“ä½œè¢«å«åšå¼¹æ ˆ(pop). æŠ½è±¡æ•°æ®ç±»å‹ # æ•°æ® # AbstractStack\nè¡Œä¸º # IStack\nIShardedStack.java\næ ˆçš„ç§ç±» # æ•°ç»„æ ˆå’Œé“¾è¡¨æ ˆ # å› ä¸ºæ ˆæ˜¯ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶çš„å°±æƒ³åˆ°å­˜åœ¨æ•°ç»„å’Œé“¾è¡¨ä¸¤ç§å®ç°æ–¹å¼ã€‚ ä¸ªäººè§‰å¾—æ•°ç»„è¿™ç§æ–¹å¼ç‰¹åˆ«åˆé€‚ï¼Œå› ä¸ºæˆ‘ä»¬é™å®šäº†æ‰€æœ‰æ“ä½œéƒ½è¦åœ¨æ ˆé¡¶ï¼Œè€Œé“¾è¡¨æ–¹å¼ä¼šå¤šä¸€äº›é¢å¤–å¼€é”€ã€‚\nå…±äº«æ ˆ # å…±äº«æ ˆå°±æ˜¯ä¸¤ä¸ªæ ˆåˆ†äº«ä¸€ä¸ªæ•°ç»„/èŠ‚ç‚¹é“¾è¡¨ï¼Œæ ˆé¡¶ç”±å•ä¸ªæ ˆçš„æ—¶å€™çš„æ•°ç»„æœ€å¤§å€¼ï¼Œå˜æˆäº†ä¸¤ä¸ªæ ˆé¡¶\u0026quot;å‘ç”Ÿç¢°æ’\u0026quot; æ ˆçš„åº”ç”¨ # é€’å½’ # é€’å½’çš„å…¸å‹è¿ç”¨åœºæ™¯å°±æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—\næ–æ³¢é‚£å¥‘æ•°åˆ—: å‰ä¸¤é¡¹æ•°çš„å’Œ f(0) = 0; f(1) = 1; f(n) = f(n-1) + f(n-2);\næ™®é€šçš„æ‰§è¡Œæ–¹æ³•å¦‚æœæˆ‘ä»¬è¦ç®—f(20),é‚£ä¹ˆè¦ä» f(0) f(1) f(2)ä¸€æ­¥æ­¥è®¡ç®—åˆ°f(20);\nä½¿ç”¨é€’å½’çš„åŒ–æˆ‘ä»¬æ˜¯ä»f(20)å¼€å§‹åˆ†è§£å…¬å¼,f(20) = f(19) + f(18);å†å»è°ƒç”¨f(18) å’Œ f(19) ä¾æ¬¡å¾€ä¸‹è‡ªå·±è°ƒç”¨è‡ªå·±ã€‚\nåœ¨è¿™ä¸ªä¾æ¬¡å‘ä¸‹çš„è°ƒç”¨è¿‡ç¨‹æˆ‘ä»¬å°±éœ€è¦ \u0026ldquo;å…ˆå°†ä¸Šå±‚çš„å…¬å¼å­˜èµ·æ¥\u0026rdquo; å…ˆå­˜èµ·æ¥çš„å…¬å¼åç®—,è¿™å’Œæ ˆç»“æ„ä¸è°‹è€Œåˆï¼Œè€Œåœ¨javaä¸­æ‰§è¡Œæ–¹æ³•çš„å‹æ ˆå’Œå‡ºæ ˆä¹Ÿç¡®å®æ˜¯è¿™æ ·çš„ã€‚\nå››åˆ™è¿ç®—æ³•åˆ™ # æˆ‘ä»¬å¸¸è§çš„è¡¨è¾¾å¼ 9+ï¼ˆ3ï¼1ï¼‰Ã—3+10Ã·2 å«åšä¸­ç¼€è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„ä¾æ®ä¼˜å…ˆçº§ â€œ æ‹¬å· å¤§äº ä¹˜é™¤ å¤§äº åŠ å‡â€ æ¥ç®—å‡ºç»“æœ\nä½†æ˜¯è®¡ç®—æœºåœ¨å¤„ç†ä¸­ç¼€è¡¨è¾¾å¼çš„æ—¶å€™å°±å¾ˆéš¾åŠ,äºæ˜¯ æ³¢å…°çš„ä¸€ä½é€»è¾‘å­¦å®¶ æƒ³å‡ºæ¥äº†ä¸€ä¸ªåç¼€(é€†æ³¢å…°)è¡¨è¾¾å¼, è€Œä¸Šè¿°ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢åæœª 9 3 1 - 3 * + 10 2 / +\nä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼ # ä¸­ç¼€è¡¨è¾¾å¼æå–åç¼€è¡¨è¾¾çš„åŸºæœ¬æ­¥éª¤:\nä¾æ¬¡è¯»å–è¡¨è¾¾å¼ä¸­çš„æ¯ä¸€é¡¹ ç¬¦å·å’Œæ•°å­— ï¼Œè¯»å–åˆ°æ•°å­—åˆ™æ”¾åˆ°åç¼€è¡¨è¾¾å¼ä¸­ï¼Œè¯»å–åˆ°ç¬¦å·åˆ™æ”¾å…¥è®¡ç®—ç¬¦å·æ ˆä¸­ å¦‚æœæ ˆé¡¶ æ— ç¬¦å· æˆ–è€… ä¼˜å…ˆçº§å°äº å½“å‰è¦æ”¾å…¥çš„ç¬¦å·,åˆ™ç›´æ¥æ”¾å…¥ å¦‚æœæ”¾å…¥çš„ç¬¦å· ä¼˜å…ˆçº§å¤§äºå½“å‰ç¬¦å·åˆ™å–å‡ºæ ˆä¸­çš„æ‰€æœ‰ç¬¦å·åŠ å…¥è¡¨è¾¾å¼ å†æ”¾å…¥ç¬¦å· å¦‚æœæ”¾å…¥çš„ç¬¦å·æ˜¯) åˆ™å–å‡ºç¬¦å·ç›´åˆ°(ä¸ºæ­¢ åŠ å…¥è¡¨è¾¾å¼ ç„¶åå†æ”¾å…¥ç¬¦å· åç¼€è¡¨è¾¾å¼çš„è®¡ç®—é€»è¾‘ # ä¾æ¬¡å°†æ¯ä¸ªè¡¨è¾¾å¼çš„å…ƒç´ æ”¾å…¥åˆ°è®¡ç®—æ ˆä¸­ å¦‚æœè·å–åˆ°è®¡ç®—ç¬¦å·åˆ™ä»æ ˆä¸­å–å‡ºä¸¤ä¸ªæ•°è¿›è¡Œè®¡ç®—ï¼Œä¹‹åå†æ”¾å…¥åˆ°æ ˆä¸­ æœ€åè®¡ç®—ç»“æŸå–å‡ºæ ˆä¸­æ•°æ®å³å¯ ","date":"11 September 2024","externalUrl":null,"permalink":"/develop/structure/stack/","section":"Develops","summary":"","title":"æ ˆ","type":"develop"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/tags/https/","section":"Tags","summary":"","title":"Https","type":"tags"},{"content":"","externalUrl":null,"permalink":"/menu/","section":"Menus","summary":"","title":"Menus","type":"menu"},{"content":"Nginxæˆ–TengineæœåŠ¡å™¨é…ç½®SSLè¯ä¹¦_æ•°å­—è¯ä¹¦ç®¡ç†æœåŠ¡ï¼ˆåŸSSLè¯ä¹¦ï¼‰(SSL Certificate)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ\nserver { listen 443 ssl; # éœ€è¦æ³¨æ„ä¸‹æœ€å¥½æŒ‡å®šæŸä¸ªåŸŸåæˆ–è€…é€šé… server_name *.{domain}; ssl_certificate /etc/nginx/ssl/default.crt; ssl_certificate_key /etc/nginx/ssl/default.key; } ","externalUrl":null,"permalink":"/develop/middleware/nginx/nginx%E9%85%8D%E7%BD%AEhttps%E8%AF%81%E4%B9%A6/","section":"Develops","summary":"","title":"nginxé…ç½®httpsè¯ä¹¦","type":"develop"},{"content":" nginxé…ç½®ä»£ç†è½¬å‘æµé‡ # ä¸šåŠ¡èƒŒæ™¯ # è·Ÿé«˜å¾·å¹³å°ç”¨808åè®®è°ƒäº†ä¸€ä¸ªè½¦è½½æ‘„åƒå¤´ç›´æ’­ï¼Œä½†æ˜¯é«˜å¾·å¹³å°æä¾›çš„æ—¶httpåè®®é€šè®¯ï¼Œæˆ‘ä»¬éœ€æ±‚httpså› æ­¤ç”¨nginxåšä¸€ä¸ªè½¬å‘\né”™è¯¯é…ç½® # server { listen 443 ssl default_server; server_name test.jinyingweishi.cn; ssl_certificate /usr/local/ssl/cert.pem; ssl_certificate_key /usr/local/ssl/cert.key; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location / { add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Methods \u0026#39;GET, POST, OPTIONS\u0026#39;; add_header Access-Control-Allow-Headers \u0026#39;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization\u0026#39;; gzip_static on; root /opt/platform/web/supervise; index index.html index.htm; } location /gaodeX { proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://ip:8080; proxy_connect_timeout 15s; proxy_send_timeout 600s; proxy_read_timeout 600s; } } æ”¹æ­£é…ç½® # server { listen 443 ssl default_server; server_name test.jinyingweishi.cn; ssl_certificate /usr/local/ssl/cert.pem; ssl_certificate_key /usr/local/ssl/cert.key; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location / { add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Methods \u0026#39;GET, POST, OPTIONS\u0026#39;; add_header Access-Control-Allow-Headers \u0026#39;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization\u0026#39;; gzip_static on; root /opt/platform/web/supervise; index index.html index.htm; } location /gaodeX/ { proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://ip:8080/; proxy_connect_timeout 15s; proxy_send_timeout 600s; proxy_read_timeout 600s; } } æ”¹åŠ¨è¯´æ˜ # é’ˆå¯¹äºlocationåŒ¹é…å¸¦ä¸å¸¦/çš„åŒºåˆ« # location /XXX åŒ¹é…ä»¥ /XX å¼€å¤´çš„è¯·æ±‚,å¦‚æœæ˜¯http://host/xxxå¯ä»¥åŒ¹é…ï¼›ä½†æ˜¯å¦‚æœæ˜¯http://host/xxx/aaaä¸å¯ä»¥åŒ¹é…\nlocation /XXX/ åŒ¹é…ä»¥ /XX/ å¼€å¤´çš„è¯·æ±‚,åˆ™æ²¡é—®é¢˜ï¼Œå¦‚æœæ˜¯http://host/xxx ä¼šå…ˆé‡å®šå‘åˆ°http://host/xxx/å†è½¬å‘\né’ˆå¯¹äºproxy_passåŒ¹é…å¸¦ä¸å¸¦/çš„åŒºåˆ« # proxy_pass http://target/XXX/ è¯·æ±‚http://host/XXX/abc åˆ™ä¼šè½¬å‘åˆ°http://target/abc\nproxy_pass http://target/XXX è¯·æ±‚http://host/XXX/abc åˆ™ä¼šè½¬å‘åˆ°http://target/XXX/abc ","externalUrl":null,"permalink":"/develop/middleware/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91%E6%B5%81%E9%87%8F/","section":"Develops","summary":"","title":"nginxé…ç½®ä»£ç†è½¬å‘æµé‡","type":"develop"},{"content":" ä¸šåŠ¡èƒŒæ™¯ # giteeActionä»˜è´¹ï¼ŒgitPagesä¹Ÿåœæ­¢äº†æœåŠ¡ï¼Œæ²¡åŠæ³•æƒ³æä¸€ä¸ªå›½å†…æœåŠ¡å™¨çš„ç‹¬ç«‹ç«™åªèƒ½è‡ªå·±åŠ¨æ‰‹äº†ï¼Œçœ‹äº†giteeæä¾›äº†webhookğŸ‘Œé‚£ä¸€åˆ‡å°±å¾ˆç®€å•äº† éƒ¨ç½²æ¶æ„ # ç”¨æˆ·åšæäº¤ä»£ç ç­‰æ“ä½œæ—¶ï¼Œå¦‚æœæ»¡è¶³webhookæ¡ä»¶åˆ™ä¼šå‘é€webhookè¯·æ±‚åˆ°å›ºå®šçš„æœåŠ¡å™¨è·¯ç”± æœåŠ¡å™¨è·¯ç”±æ¥æ”¶åˆ°ä¹‹åå°±æ›´æ–°gitä»“åº“ï¼ˆgo æä¾›æœåŠ¡ï¼ŒçœŸçš„å¾ˆæ–¹ä¾¿ï¼‰ ç„¶åç”Ÿæˆé™æ€æ–‡ä»¶éƒ¨ç½²åˆ°nginx webhookè®¾ç½® # é€‰æ‹©è§¦å‘äº‹ä»¶ä»¥åŠæœåŠ¡è·¯ç”±å³å¯ï¼Œè§¦å‘å¯¹åº”äº‹ä»¶çš„æ—¶å€™å°±ä¼šèµ°POSTè°ƒç”¨\ngoç¼–å†™webæœåŠ¡ # çœŸçš„æ¯”javaå¿«é€Ÿä¸”æ–¹ä¾¿å¾ˆå¤šï¼Œéœ€è¦åŠ å¯†è‡ªå·±å†™å³å¯\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;net/http\u0026#34; \u0026#34;os/exec\u0026#34; ) func webhookHandler(w http.ResponseWriter, r *http.Request) { if r.Method == http.MethodPost { // è§£æ Webhook è¯·æ±‚çš„å†…å®¹ // è¿™é‡Œåªæ˜¯ç®€å•çš„ç¤ºä¾‹ï¼Œå®é™…æƒ…å†µå¯èƒ½éœ€è¦æ›´å¤šçš„å¤„ç† body := r.Body defer body.Close() // ä½ å¯ä»¥æ ¹æ®éœ€è¦è§£æè¯·æ±‚ä½“ä¸­çš„ä¿¡æ¯ // æ‰§è¡Œ Shell å‘½ä»¤ cmd := exec.Command(\u0026#34;/bin/bash\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;./deploy.sh\u0026#34;) output, err := cmd.CombinedOutput() if err != nil { http.Error(w, \u0026#34;Failed to execute command\u0026#34;, http.StatusInternalServerError) log.Println(\u0026#34;Command execution error:\u0026#34;, err) return } // è¾“å‡ºæ‰§è¡Œç»“æœ fmt.Fprintf(w, \u0026#34;Command executed successfully: %s\u0026#34;, output) } else { http.Error(w, \u0026#34;Invalid request method\u0026#34;, http.StatusMethodNotAllowed) } } func main() { http.HandleFunc(\u0026#34;/webhook\u0026#34;, webhookHandler) log.Println(\u0026#34;Starting server on :8080\u0026#34;) if err := http.ListenAndServe(\u0026#34;:8080\u0026#34;, nil); err != nil { log.Fatal(\u0026#34;ListenAndServe: \u0026#34;, err) } } éƒ¨ç½²è„šæœ¬ # #!/bin/bash # å®šä¹‰è·¯å¾„ path=\u0026#34;/opt/webhook/blue-whale/\u0026#34; deployPath=\u0026#34;/opt/www/blueWhale/\u0026#34; gitPath=\u0026#34;git@gitee.com:jzwPro/blue-whale.git\u0026#34;; # æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ if [ ! -d \u0026#34;${path}\u0026#34; ]; then echo \u0026#34;Directory does not exist. Cloning the repository...\u0026#34; # ä» Git ä»“åº“å…‹éš†é¡¹ç›® git clone ${gitPath} \u0026#34;${path}\u0026#34; else echo \u0026#34;Directory exists. Pulling the latest changes...\u0026#34; fi cd \u0026#34;${path}\u0026#34; || exit git pull # ç”Ÿæˆ Hugo é™æ€æ–‡ä»¶ /opt/hugo/hugo # åˆ é™¤ç›®æ ‡ç›®å½•åŠå…¶å†…å®¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ rm -rf \u0026#34;${deployPath}\u0026#34; mkdir -p \u0026#34;${deployPath}\u0026#34; # å¤åˆ¶ç”Ÿæˆçš„é™æ€æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½• cp -r ./public/* \u0026#34;${deployPath}\u0026#34; echo \u0026#34;Deployment completed successfully.\u0026#34; ","externalUrl":null,"permalink":"/develop/design/%E5%9F%BA%E4%BA%8Egitee%E7%9A%84webhook%E7%9A%84%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88/","section":"Develops","summary":"","title":"åŸºäºgiteeçš„webhookçš„è‡ªåŠ¨éƒ¨ç½²æ–¹æ¡ˆ","type":"develop"},{"content":" togally/BlueWhale HTML 1 0 ","externalUrl":null,"permalink":"/menu/project/","section":"Menus","summary":"","title":"é¡¹ç›®","type":"menu"}]